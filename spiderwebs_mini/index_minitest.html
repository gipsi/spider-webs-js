
<!doctype html>
<html>
	<head>
		<title>JS1k, 1k demo submission [ID]</title>
		<meta charset="utf-8" />
	</head>
	<body>
		<canvas id="c"></canvas>
		<script>
			var b = document.body;
			var c = document.getElementsByTagName('canvas')[0];
			var a = c.getContext('2d');
			document.body.clientWidth; // fix bug in webkit: http://qfox.nl/weblog/218
		</script>
		<script>
// start of submission //

//function web(){function t(a,b,c,d){var f,g,h,i,j,k,m,n;this.startPt=new P(b.x,b.y);this.endPt=new P(c.x,c.y);this.strandLength=undefined;this.points=[];this.myOrder=a;this.myAngle=undefined;this.spacingNoise=d;this.rayPointAmt=l;this.startPoint=b;this.nextPoint=c;this.strands=undefined;this.rayPoints=[];this.myAngle=getAngle(this.startPt,this.endPt);h=getPartDist(this.startPt,this.endPt);i=r;this.strandLength=h<i?h:i;j=(this.strandLength-5)*.99/l;for(k=0;k<this.rayPointAmt;k+=1){n=1;m=new P(q.x+Math.cos(this.myAngle)*k*j*n,q.y+Math.sin(this.myAngle)*k*j*n);this.points.push(m);e+=.2}}function s(a,b){var c;this.startPt=new P(a.x,a.y);this.endPt=new P(b.x,b.y);this.myAngle=undefined;c=new P(q.x,q.y);this.rayPoints=[];this.startPoint=a;this.nextPoint=b;this.myAngle=getAngle(a,c)}var b,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;f=Math.floor(Math.random()*3)+4;d=Math.random()*30+40;l=Math.random()*10+15;m=[];n=[];g=c.width/2;h=c.height/2;j=200;o=Math.PI*2;p=Math.PI/2;drawWeb=function(){n=[];b=[];this.placeAnchorPoints();this.drawPerimeterLines()};placeAnchorPoints=function(){var a,b,d,e,i,k,l,m,n,p,t,u,v,w,x,y;a=[];b=o/f;d=0;e=c.width;i=0;k=c.height;l=0;v=new P(100,100);for(m=0;m<f;m+=1){n=m*b;p=j*(Math.random()+.5);l+=p;t=g+Math.cos(n)*p;u=h+Math.sin(n)*p;v=this.addParticle(t,u);d=t>d?t:d;e=t<e?t:e;i=u>i?u:i;k=u<k?u:k;a.push(v)}r=l/f;q=this.addParticle(e+(d-e)/2,k+(i-k)/2);this.anchors=[];for(m=0;m<a.length;m+=1){w=a[m];x=m<a.length-1?a[m+1]:a[0];y=new s(w,x);y.drawEdgeLines();this.anchors.push(y)}};drawPerimeterLines=function(){var a,b;for(a=0;a<this.anchors.length;a+=1){b=this.anchors[a];b.makePoints()}this.makeRays()};makeRays=function(){var a,c;for(a=0;a<b.length;a+=1){c=b[a];c.make()}for(a=0;a<b.length;a+=1){c=b[a];c.defineRayPoints()}};addParticle=function(a,b){var c,d;for(d=0;d<m.length;d+=2){if(m[d].x===a&&m[d].y===b){return m[d]}}c=new P(a,b);m.push(c);return c};s.prototype.drawEdgeLines=function(){var a,b,d,e,f,g,h;a=p-(this.myAngle<0?this.myAngle+o:this.myAngle);b=this.startPt.x<c.width/2?-this.startPt.x:c.width-this.startPt.x;d=this.startPt.y<c.height/2?-this.startPt.y:c.height-this.startPt.y;e=b/Math.sin(a);f=d/Math.cos(a);g=Math.abs(e)<Math.abs(f)?e:f;h=addParticle(this.startPt.x+Math.cos(this.myAngle)*g,this.startPt.y+Math.sin(this.myAngle)*g);addStrand(this.startPoint,h)};s.prototype.makePoints=function(){var a,c,f,g,h,i,j,k,l,m;a=getPartDist(this.startPt,this.endPt);c=getAngle(this.endPt,this.startPt);pointDistFactor=0;do{f=Math.floor(a/(d-pointDistFactor));pointDistFactor+=1}while(f<2);g=a/f;this.rayPoints=[];for(h=0;h<f;h+=1){i=this.startPt.x+Math.cos(c)*h*g;j=this.startPt.y+Math.sin(c)*h*g;addParticle(i,j);var n=addParticle(i,j);k=new t(b.length,n,q,e);b.push(k);this.rayPoints.push(n);if(h>0){l=this.rayPoints[h];m=this.rayPoints[h-1];addStrand(l,m)}}addStrand(l,this.nextPoint)};t.prototype.make=function(){var a,c,d,e,f,g,h,i,j,k,l,m,o;n=[];this.addRayPoint(this.startPoint);this.addRayPoint(this.nextPoint);for(a=1;a<this.rayPointAmt;a+=1){c=Math.round(Math.random()*20);if(c===0||c===19||c===18){continue}d=this.points[a];if(this.myOrder<b.length-1){f=b[this.myOrder+1]}else{f=b[0]}g=f.myAngle;h=d.x-q.x;i=d.y-q.y;j=this.getRandomPoint(h,i,a*.2,this.strandLength);k=addParticle(q.x+Math.cos(this.myAngle)*j,q.y+Math.sin(this.myAngle)*j);j=this.getRandomPoint(h,i,a*.2,f.strandLength);if(c===1){this.drawYShape(d,k,g,f,j)}else{this.drawStrand(k,g,f,j)}if(c===2){j=this.getRandomPoint(h,i,a*.8,f.strandLength);this.drawStrand(k,g,f,j)}else if(c===3){l=Math.round(Math.random())===0?g:this.myAngle;if(l===g){m=k;o=f.strandLength;j=this.getRandomPoint(h,i,a*Math.random()*4+6,o);this.drawStrand(m,l,f,j,true)}else{m=k;o=f.strandLength;j=this.getRandomPoint(h,i,a*Math.random()*-4-6,o);this.drawStrand(m,g,f,j,true)}}}};t.prototype.drawYShape=function(a,b,c,d,e){var f,g,h,i,j,k,l,m;f=Math.random()*3+2;g=Math.round(Math.random())===0?c:this.myAngle;h=addParticle(q.x+Math.cos(g)*(e-f),q.y+Math.sin(g)*(e-f));f=Math.random()*3+2;i=addParticle(q.x+Math.cos(g)*(e+f),q.y+Math.sin(g)*(e+f));j=g===c?this.myAngle-c:c-this.myAngle;if(j<-1){j+=o}if(j>1){j-=o}k=Math.random()*j;l=addParticle(q.x+Math.cos(g+k)*e,q.y+Math.sin(g+k)*e);if(g===c){m=b;this.addRayPoint(m);d.addRayPoint(h);d.addRayPoint(i)}else{m=addParticle(q.x+Math.cos(c)*e,q.y+Math.sin(c)*e);d.addRayPoint(m);this.addRayPoint(h);this.addRayPoint(i)}addStrand(m,l);addStrand(l,h);addStrand(l,i)};t.prototype.drawStrand=function(a,b,c,d,e){var f,g;f=addParticle(q.x+Math.cos(b)*d,q.y+Math.sin(b)*d);g=getPartDist(a,f);if(g>0){this.addRayPoint(a);c.addRayPoint(f);addStrand(a,f)}};t.prototype.defineRayPoints=function(){function h(c,d){a=getPartDist(q,c);b=getPartDist(q,d);return Math.round(a-b)}var a,b,c,d,e,f,g;this.rayPoints.sort(h);for(c=1;c<this.rayPoints.length;c+=1){d=this.rayPoints[c];e=this.rayPoints[c-1];f=getPartDist(d,e);addStrand(d,e)}};t.prototype.boolToInt=function(a){var b=a?1:0;return b};t.prototype.getRandomPoint=function(a,b,c,d){var e=Math.sqrt(a*a+b*b)+Math.random()*c*2-c;e=e>d?d:e;return e};t.prototype.addRayPoint=function(a){for(var b=0;b<this.rayPoints.length;b+=1){if(this.rayPoints[b].x===a.x&&this.rayPoints[b].y===a.y){return}}this.rayPoints.push(a)};getPartDist=function(a,b){var c,d,e;c=a.x-b.x;d=a.y-b.y;e=Math.sqrt(c*c+d*d);return e};getAngle=function(a,b){var c,d;c=a.x-b.x;d=a.y-b.y;return Math.atan2(d,c)};addStrand=function(b,c){a.strokeStyle="rgba(0, 0, 0, "+(Math.random()*.5+.3)+")";a.beginPath();a.moveTo(b.x,b.y);a.lineTo(c.x,c.y);a.stroke()};drawWeb()}function dis(){}function P(a,b){this.x=a;this.y=b}c.width=800;c.height=800;web()
//c.width=800;c.height=800;with(m=Math){C=cos,S=sin,Rn=random,F=floor,Rd=round,Sq=sqrt,Pi=PI,T=atan2}function P(b,d){this.x=b;this.y=d}function w(){var e,b=(Rn()*30)+30,g=(Rn()*3)+4,k=c.width/2,j=c.height/2,d=(Rn()*10)+15,l=[],n=[],f=Pi*2,h;aPts=function(){var s=[],M,L,O,J,y,x,K,I,N,q,D,B,A,u,v,E,H,G,o,t,z;n=[];e=[];for(M=0;M<g;M+=1){O=M*(f/g);J=200*(Rn()+0.5);y=k+C(O)*J;x=j+S(O)*J;K=addPt(y,x);s.push(K)}h=addPt(c.width/2,c.height/2);for(M=0;M<s.length;M+=1){I=s[M];N=(M<s.length-1)?s[M+1]:s[0];q=getA(I,h);D=(I.x<c.width/2)?-I.x:c.width-I.x;B=(I.y<c.height/2)?-I.y:c.height-I.y;edgeP=addPt(I.x+C(q)*500,I.y+S(q)*500);addS(I,edgeP);A=getPtDist(I,N);u=getA(N,I);v=F(A/b);E=A/v;z=[];for(L=0;L<v;L+=1){H=I.x+C(u)*(L*E);G=I.y+S(u)*(L*E);addPt(H,G);t=addPt(H,G);z.push(t);J=new i(e.length,t,h);e.push(J);if(L>0){K=z[L];o=z[L-1];addS(K,o)}}addS(K,N)}};mkR=function(){var A,y,o,D,s,x,t,J,I,q,u,z,v,H,G,E=e.length;for(A=0;A<E;A+=1){o=e[A];n=[];o.rPts.push(o.startPt);o.rPts.push(o.nextPt);for(y=1;y<d;y+=1){D=Rd(Rn()*5);if(D===1){continue}s=o.points[y];x=(o.ord<e.length-1)?e[o.ord+1]:x=e[0];t=x.myA;J=s.x-h.x;I=s.y-h.y;q=getRPt(J,I,y*0.2,o.strndLen);u=addPt(h.x+C(o.myA)*q,h.y+S(o.myA)*q);q=getRPt(J,I,y*0.2,x.strndLen);drwStr(o,u,t,x,q)}}for(A=0;A<E;A+=1){o=e[A];function B(r,p){z=getPtDist(h,r);v=getPtDist(h,p);return Rd(z-v)}o.rPts.sort(B);for(y=1;y<o.rPts.length;y+=1){H=o.rPts[y];G=o.rPts[y-1];addS(H,G)}}};addPt=function(q,o){var p=new P(q,o);l.push(p);return p};function i(x,v,t){this.points=[];this.ord=x;this.startPt=v;this.nextPt=t;this.rPts=[];this.myA=getA(v,t);var q=getPtDist(v,t),s,r,u;this.strndLen=(q<200)?q:200;s=((this.strndLen-5)*0.99)/d;for(r=0;r<d;r+=1){u=new P(h.x+C(this.myA)*(r*s),h.y+S(this.myA)*(r*s));this.points.push(u)}}drwStr=function(q,t,p,u,o){var s=addPt(h.x+C(p)*o,h.y+S(p)*o);if(getPtDist(t,s)){q.rPts.push(t);addS(t,s)}};getRPt=function(q,o,p,s){var r=Sq((q*q)+(o*o))+Rn()*(p*2)-p;return(r>s)?s:r};getPtDist=function(r,q){var p=(r.x-q.x),o=(r.y-q.y);return Sq((p*p)+(o*o))};getA=function(p,o){return T((p.y-o.y),(p.x-o.x))};addS=function(p,o){a.strokeStyle="rgba(0, 0, 0, "+((Rn()*0.6)+0.25)+")";a.beginPath();a.moveTo(p.x,p.y);a.lineTo(o.x,o.y);a.stroke()};aPts();mkR()}w();

c.width=800;c.height=800;function P(B,x){this.x=B;this.y=x}
function w(){function B(h,l){this.a=A(h,l);this.l=G(h,l);L(h,l)}var x=Math,v=x.random,y=x.cos,C=x.sin,H=x.pow,F=10*v()+15,E=new P(400,400);G=function(h,l){var v=h.x-l.x,y=h.y-l.y;return x.sqrt(v*v+y*y)};A=function(h,l){return x.atan2(h.y-l.y,h.x-l.x)};L=function(h,l){a.lineWidth=0.6*v()+0.2;a.beginPath();a.moveTo(h.x,h.y);a.lineTo(l.x,l.y);a.stroke()};g=function(){var h=1,l=0.1*v()+0.2;z=[];e=[];f=function(h,v,B){o=l*(-H(h,2)+40*h+1200);q=x.PI*h/180;p=new P(B*(400+o*C(q))+v,600-o*y(q))};for(i=0;119>
i;i+=h)j=i%61,61<=i?f(j,0,1):f(61-j,800,-1),z.push(p),m=A(p,E),0==i%6&&L(p,new P(400+800*y(m),400+800*C(m))),e.push(new B(p,E)),u=e.length,1<u&&D(u-2),h=~~(4*v()+1),g=z.length,0<i&&L(p,z[g-2]);L(z[g-1],z[0]);D(0);D(u-1)};D=function(h){r=e[h];for(k=1;k<F;k++)1!=5*v()&&(s=r.l/F*k,b=new P(400+y(r.a)*s,400+C(r.a)*s),n=0!=h?e[h-1]:e[u-1],d=G(b,E)+v()*0.4*k-0.2*k,t=new P(400+y(r.a)*d,400+C(r.a)*d),d=d>n.l?n.l:d,L(t,new P(400+y(n.a)*d,400+C(n.a)*d)))};g()}w();

// end of submission //
		</script>
	</body>
</html>
